(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{41:function(t,e,a){},79:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a.n(n),r=a(34),s=a.n(r),i=a(11),o=(a(41),a(4)),u=a(5),l=a(7),h=a(6),m=a(3),j="/",v="/movies",b="/movies/:movieId",d="/movies/:movieId/cast",p="/movies/:movieId/reviews",O=a(0),f=function(){return Object(O.jsxs)("ul",{className:"nav-list",children:[Object(O.jsx)("li",{className:"nav-list__item",children:Object(O.jsx)(i.c,{exact:!0,to:j,className:"nav-list__link",activeClassName:"nav-list__link--active",children:"Home"})}),Object(O.jsx)("li",{className:"nav-list__item",children:Object(O.jsx)(i.c,{exact:!0,to:v,className:"nav-list__link",activeClassName:"nav-list__link--active",children:"Movies"})})]})},g=a(17),x=a(18),y=a.n(x),_="ecafb96f29eb9b2017ec13981edc2764";y.a.defaults.baseURL="https://api.themoviedb.org/3";var k=function(t){return y.a.get("/trending/movie/week?api_key=".concat(_,"&page=").concat(t)).then((function(t){return t.data.results}))},N=function(t){return y.a.get("/movie/".concat(t,"?api_key=").concat(_)).then((function(t){return t}))},S=function(t,e){return y.a.get("/search/movie?api_key=".concat(_,"&query=").concat(t,"&page=").concat(e)).then((function(t){return t.data.results}))},D=function(t){return y.a.get("https://api.themoviedb.org/3/movie/".concat(t,"/reviews?api_key=").concat(_))},w=function(t){return y.a.get("https://api.themoviedb.org/3/movie/".concat(t,"/credits?api_key=").concat(_))},C=function(t){var e=t.onClick;return Object(O.jsx)("div",{className:"button-container",children:Object(O.jsx)("button",{onClick:e,type:"submit",className:"button",children:"Show more"})})},P=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.moviesData,a=t.onClick,n=t.location;return Object(O.jsx)(O.Fragment,{children:!!e.length&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("ul",{className:"moviesList",children:e.map((function(t){var e=t.poster_path,a=t.original_title,c=t.title,r=t.id;return Object(O.jsx)("li",{className:"moviesList__item",children:Object(O.jsxs)(i.b,{to:{pathname:"/movies/".concat(r),state:{from:n}},children:[Object(O.jsx)("img",{src:"https://image.tmdb.org/t/p/w500"+e,alt:a,className:"moviesList__img"}),Object(O.jsx)("h3",{className:"moviesList__title",children:c})]})},r)}))}),Object(O.jsx)(C,{onClick:a})]})})}}]),a}(n.Component),q=Object(m.f)(P),L=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={moviesData:[],currentPage:1,error:""},t.changePage=function(){t.setState((function(t){return{currentPage:t.currentPage+1}}))},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this;this.state.currentPage!==e.currentPage&&k(this.state.currentPage).then((function(t){return a.setState({moviesData:[].concat(Object(g.a)(e.moviesData),Object(g.a)(t))})})).catch((function(t){return a.setState({error:t.message})}))}},{key:"componentDidMount",value:function(){var t=this;k(this.state.currentPage).then((function(e){return t.setState({moviesData:e})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.error;return Object(O.jsxs)("div",{children:[t&&Object(O.jsx)("h2",{children:t}),Object(O.jsx)(q,{moviesData:this.state.moviesData,onClick:this.changePage})]})}}]),a}(n.Component),I=a(35),A=a.n(I),F=a(91),M=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={input:""},t.handleInput=function(e){t.setState({input:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.input)},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t){this.props.query!==t.query&&this.setState({input:this.props.query})}},{key:"render",value:function(){return Object(O.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(O.jsx)("input",{className:"SearchForm-input",type:"text",value:this.state.input,autoComplete:"off",autoFocus:!0,placeholder:"Search movies...",onChange:this.handleInput}),Object(O.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(O.jsx)("span",{className:"SearchForm-button-label"})})]})}}]),a}(n.Component),G=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={moviesData:[],currentPage:1,query:"",error:"",isLoading:!1},t.changePage=function(){t.setState((function(t){return{currentPage:t.currentPage+1}}))},t.changeQuery=function(e){t.setState({currentPage:1}),t.setState({query:e})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=A.a.parse(this.props.location.search);t.query&&this.setState({query:t.query})}},{key:"componentDidUpdate",value:function(t,e){var a=this;""!==this.state.query&&(this.state.currentPage!==e.currentPage&&S(this.state.query,this.state.currentPage).then((function(t){return a.setState((function(e){return{isLoading:!0,moviesData:[].concat(Object(g.a)(e.moviesData),Object(g.a)(t))}}))})).catch((function(t){return a.setState({error:t.message})})).finally((function(){return a.setState({isLoading:!1})})),this.state.query!==e.query&&(this.setState({moviesData:[]}),S(this.state.query,this.state.currentPage).then((function(t){return a.setState((function(e){return{isLoading:!0,moviesData:[].concat(Object(g.a)(e.moviesData),Object(g.a)(t))}}))})).catch((function(t){return a.setState({error:t.message})})).finally((function(){return a.setState({isLoading:!1})})),this.props.history.push({pathname:this.props.location.pathname,search:"query=".concat(this.state.query)})))}},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(M,{onSubmit:this.changeQuery,query:this.state.query}),Object(O.jsx)(q,{moviesData:this.state.moviesData,onClick:this.changePage,url:this.props.match.url}),this.state.isLoading&&Object(O.jsx)("div",{className:"spinner",children:Object(O.jsx)(F.a,{})})]})}}]),a}(n.Component),U=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={castData:[],error:""},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.movieId;w(e).then((function(e){var a=e.data;return t.setState({castData:a.cast})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.castData;return Object(O.jsx)("div",{children:Object(O.jsx)("ul",{className:"cast",children:t.map((function(t){var e=t.profile_path,a=t.name,n=t.character,c=t.id;return Object(O.jsxs)("li",{className:"cast__item",children:[Object(O.jsx)("img",{className:"cast__img",src:"https://image.tmdb.org/t/p/w500"+e,alt:a}),Object(O.jsx)("h3",{className:"cast__name",children:a}),Object(O.jsxs)("p",{className:"cast__character",children:["Character: ",n]})]},c)}))})})}}]),a}(n.Component),B=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={reviewsData:[],error:""},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.movieId;D(e).then((function(e){var a=e.data;return t.setState({reviewsData:a.results})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.reviewsData;return Object(O.jsxs)("div",{children:[this.state.error&&Object(O.jsx)("h1",{children:this.state.error}),!this.state.error&&Object(O.jsx)("ul",{children:t.map((function(t){var e=t.author,a=t.content,n=t.id;return Object(O.jsxs)("li",{children:[Object(O.jsxs)("h2",{children:["Author: ",e]}),Object(O.jsx)("p",{children:a})]},n)}))})]})}}]),a}(n.Component),J=Object(m.f)((function(t){var e,a,n=t.movieData,c=t.location,r=n.poster_path,s=n.title,o=n.genres,u=n.overview,l=n.vote_average,h=n.id;return Object(O.jsxs)("div",{className:"movie",children:[Object(O.jsx)("h1",{className:"movie__title",children:s}),Object(O.jsxs)("div",{className:"movie__block-title",children:[Object(O.jsx)("img",{className:"movie__img",src:"https://image.tmdb.org/t/p/w500"+r,alt:s}),Object(O.jsx)("p",{className:"movie__text",children:l})]}),Object(O.jsxs)("div",{className:"movie__block-overview",children:[Object(O.jsx)("h2",{className:"movie__subtitle",children:"Overview"}),Object(O.jsx)("p",{className:"movie__text",children:u}),Object(O.jsx)("h2",{className:"movie__subtitle",children:"Genres"}),Object(O.jsx)("ul",{className:"movie__genres",children:o&&o.map((function(t){var e=t.id,a=t.name;return Object(O.jsx)("li",{children:a},e)}))})]}),Object(O.jsxs)("div",{className:"movie__block-add",children:[Object(O.jsx)("p",{className:"movie__text",children:"Additional information"}),Object(O.jsxs)("ul",{className:"movie__add",children:[Object(O.jsx)("li",{children:Object(O.jsx)(i.b,{to:{pathname:"/movies/".concat(h,"/cast"),state:{from:null===c||void 0===c||null===(e=c.state)||void 0===e?void 0:e.from}},children:"Cast"})}),Object(O.jsx)("li",{children:Object(O.jsx)(i.b,{to:{pathname:"/movies/".concat(h,"/reviews"),state:{from:null===c||void 0===c||null===(a=c.state)||void 0===a?void 0:a.from}},children:"Reviews"})})]})]}),Object(O.jsx)(m.a,{path:d,component:U}),Object(O.jsx)(m.a,{path:p,component:B})]})})),Q=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={movieData:{},error:""},t.handleGoBack=function(){var e,a=t.props.location;(null===(e=a.state)||void 0===e?void 0:e.from)?t.props.history.push(a.state.from):t.props.history.push("/")},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.movieId;N(e).then((function(e){var a=e.data;return t.setState({movieData:a})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.movieData;return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{type:"button",onClick:this.handleGoBack,className:"button",children:"Go back"}),this.state.error&&Object(O.jsx)("h2",{children:this.state.error}),Object(O.jsx)(J,{movieData:t})]})}}]),a}(n.Component),R=Object(m.f)(Q),E=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(f,{}),Object(O.jsxs)(m.c,{children:[Object(O.jsx)(m.a,{exact:!0,path:j,component:L}),Object(O.jsx)(m.a,{path:b,component:R}),Object(O.jsx)(m.a,{path:v,component:G})]})]})}}]),a}(n.Component);s.a.render(Object(O.jsx)(i.a,{children:Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(E,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.b5d6e90e.chunk.js.map