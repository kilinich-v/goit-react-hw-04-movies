(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{18:function(t,e){},44:function(t,e,a){},83:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),c=a(37),s=a.n(c),i=a(11),o=(a(44),a(4)),u=a(5),l=a(7),h=a(6),j=a(3),m="/",v="/movies",b="/movies/:movieId",d="/movies/:movieId/cast",p="/movies/:movieId/reviews",O=a(0),f=function(){return Object(O.jsxs)("ul",{className:"nav-list",children:[Object(O.jsx)("li",{className:"nav-list__item",children:Object(O.jsx)(i.c,{exact:!0,to:m,className:"nav-list__link",activeClassName:"nav-list__link--active",children:"Home"})}),Object(O.jsx)("li",{className:"nav-list__item",children:Object(O.jsx)(i.c,{exact:!0,to:v,className:"nav-list__link",activeClassName:"nav-list__link--active",children:"Movies"})})]})},x=a(15),g=a.n(x),y=a(20),_=a(19),k=a.n(_),S="k_wv206swt";k.a.defaults.baseURL="https://imdb-api.com/API";var D=function(){return Object(y.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("/Top250Movies/".concat(S));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},N=function(t){return Object(y.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/SearchMovie/".concat(S,"/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},w=function(t){var e=t.onClick;return Object(O.jsx)("div",{className:"button-container",children:Object(O.jsx)("button",{onClick:e,type:"submit",className:"button",children:"Show more"})})},C=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.moviesData,a=t.onClick,n=t.location;return Object(O.jsx)(O.Fragment,{children:!!(null===e||void 0===e?void 0:e.items)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("ul",{className:"moviesList",children:e.items.map((function(t){var e=t.image,a=t.title,r=t.id;return Object(O.jsx)("li",{className:"moviesList__item",children:Object(O.jsxs)(i.b,{to:{pathname:"/movies/".concat(r),state:{from:n}},children:[Object(O.jsx)("img",{src:e,alt:e,className:"moviesList__img"}),Object(O.jsx)("h3",{className:"moviesList__title",children:a})]})},r)}))}),Object(O.jsx)(w,{onClick:a})]})})}}]),a}(n.Component),q=Object(j.f)(C),P=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={moviesData:{},currentPage:1,error:""},t.changePage=function(){t.setState((function(t){return{currentPage:t.currentPage+1}}))},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t,e){}},{key:"componentDidMount",value:function(){var t=this;D().then((function(e){return t.setState({moviesData:e})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.error;return Object(O.jsxs)("div",{children:[t&&Object(O.jsx)("h2",{children:t}),Object(O.jsx)(q,{moviesData:this.state.moviesData,onClick:this.changePage})]})}}]),a}(n.Component),L=a(21),M=a(38),I=a.n(M),A=a(95),F=a(18),Q=a.n(F),U=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={input:""},t.handleInput=function(e){t.setState({input:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.input)},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t){this.props.query!==t.query&&this.setState({input:this.props.query})}},{key:"render",value:function(){return Object(O.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(O.jsx)("input",{className:"SearchForm-input",type:"text",value:this.state.input,autoComplete:"off",autoFocus:!0,placeholder:"Search movies...",onChange:this.handleInput}),Object(O.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(O.jsx)("span",{className:"SearchForm-button-label"})})]})}}]),a}(n.Component),B=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={moviesData:[],currentPage:1,query:"",error:"",isLoading:!1},t.changePage=function(){t.setState((function(t){return{currentPage:t.currentPage+1}}))},t.changeQuery=function(e){t.setState({currentPage:1}),t.setState({query:e})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=I.a.parse(this.props.location.search);t.query&&this.setState({query:t.query})}},{key:"componentDidUpdate",value:function(t,e){var a=this;""!==this.state.query&&(this.state.currentPage!==e.currentPage&&Q.a.getMovieFromQuery(this.state.query,this.state.currentPage).then((function(t){return a.setState((function(e){return{isLoading:!0,moviesData:[].concat(Object(L.a)(e.moviesData),Object(L.a)(t))}}))})).catch((function(t){return a.setState({error:t.message})})).finally((function(){return a.setState({isLoading:!1})})),this.state.query!==e.query&&(this.setState({moviesData:[]}),Q.a.getMovieFromQuery(this.state.query,this.state.currentPage).then((function(t){return a.setState((function(e){return{isLoading:!0,moviesData:[].concat(Object(L.a)(e.moviesData),Object(L.a)(t))}}))})).catch((function(t){return a.setState({error:t.message})})).finally((function(){return a.setState({isLoading:!1})})),this.props.history.push({pathname:this.props.location.pathname,search:"query=".concat(this.state.query)})))}},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(U,{onSubmit:this.changeQuery,query:this.state.query}),Object(O.jsx)(q,{moviesData:this.state.moviesData,onClick:this.changePage,url:this.props.match.url}),this.state.isLoading&&Object(O.jsx)("div",{className:"spinner",children:Object(O.jsx)(A.a,{})})]})}}]),a}(n.Component),G=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={castData:[],error:""},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.movieId;Q.a.getCast(e).then((function(e){var a=e.data;return t.setState({castData:a.cast})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.castData;return Object(O.jsx)("div",{children:Object(O.jsx)("ul",{className:"cast",children:t.map((function(t){var e=t.profile_path,a=t.name,n=t.character,r=t.id;return Object(O.jsxs)("li",{className:"cast__item",children:[Object(O.jsx)("img",{className:"cast__img",src:"https://image.tmdb.org/t/p/w500"+e,alt:a}),Object(O.jsx)("h3",{className:"cast__name",children:a}),Object(O.jsxs)("p",{className:"cast__character",children:["Character: ",n]})]},r)}))})})}}]),a}(n.Component),R=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={reviewsData:[],error:""},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.movieId;Q.a.getReviews(e).then((function(e){var a=e.data;return t.setState({reviewsData:a.results})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.reviewsData;return Object(O.jsxs)("div",{children:[this.state.error&&Object(O.jsx)("h1",{children:this.state.error}),!this.state.error&&Object(O.jsx)("ul",{children:t.map((function(t){var e=t.author,a=t.content,n=t.id;return Object(O.jsxs)("li",{children:[Object(O.jsxs)("h2",{children:["Author: ",e]}),Object(O.jsx)("p",{children:a})]},n)}))})]})}}]),a}(n.Component),J=Object(j.f)((function(t){var e,a,n=t.movieData,r=t.location,c=n.image,s=n.title,o=n.id;return Object(O.jsxs)("div",{className:"movie",children:[Object(O.jsx)("h1",{className:"movie__title",children:s}),Object(O.jsx)("div",{className:"movie__block-title",children:Object(O.jsx)("img",{className:"movie__img",src:c,alt:s})}),Object(O.jsx)("div",{id:"yohoho","data-title":s,"data-videospider_tv":"0"}),Object(O.jsxs)("div",{className:"movie__block-add",children:[Object(O.jsx)("p",{className:"movie__text",children:"Additional information"}),Object(O.jsxs)("ul",{className:"movie__add",children:[Object(O.jsx)("li",{children:Object(O.jsx)(i.b,{to:{pathname:"/movies/".concat(o,"/cast"),state:{from:null===r||void 0===r||null===(e=r.state)||void 0===e?void 0:e.from}},children:"Cast"})}),Object(O.jsx)("li",{children:Object(O.jsx)(i.b,{to:{pathname:"/movies/".concat(o,"/reviews"),state:{from:null===r||void 0===r||null===(a=r.state)||void 0===a?void 0:a.from}},children:"Reviews"})})]})]}),Object(O.jsx)(j.a,{path:d,component:G}),Object(O.jsx)(j.a,{path:p,component:R})]})})),E=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={movieData:{},error:""},t.handleGoBack=function(){var e,a=t.props.location;(null===(e=a.state)||void 0===e?void 0:e.from)?t.props.history.push(a.state.from):t.props.history.push("/")},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.movieId;N(e).then((function(e){var a=e.results;return t.setState({movieData:a[0]})})).catch((function(e){return t.setState({error:e.message})}))}},{key:"render",value:function(){var t=this.state.movieData;return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{type:"button",onClick:this.handleGoBack,className:"button",children:"Go back"}),this.state.error&&Object(O.jsx)("h2",{children:this.state.error}),Object(O.jsx)(J,{movieData:t})]})}}]),a}(n.Component),H=Object(j.f)(E),T=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(f,{}),Object(O.jsxs)(j.c,{children:[Object(O.jsx)(j.a,{exact:!0,path:m,component:P}),Object(O.jsx)(j.a,{path:b,component:H}),Object(O.jsx)(j.a,{path:v,component:B})]})]})}}]),a}(n.Component);s.a.render(Object(O.jsx)(i.a,{children:Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(T,{})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.07a0a2b3.chunk.js.map